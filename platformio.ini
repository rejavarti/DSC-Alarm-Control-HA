;PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[platformio]
default_envs = esp32dev

[env]
; Common settings for all environments
framework = arduino
monitor_speed = 115200
upload_speed = 921600
upload_port = COM[2345]
lib_ldf_mode = deep+
targets = upload, monitor

; Common libraries used across examples
lib_deps = 
    knolleary/PubSubClient@^2.8
    bblanchon/ArduinoJson@6.19.4
    https://github.com/me-no-dev/ESPAsyncWebServer.git
    https://github.com/me-no-dev/AsyncTCP.git
    DNSServer
    https://github.com/SofaPirate/Chrono.git
    ; Add other common dependencies here as needed

; Build flags for debugging (optional)
build_flags = 
    -DDEBUG_ESP_PORT=Serial
    -DDEBUG_ESP_CORE

; Common ESP32 settings  
[env:esp32-base]
; Base ESP32 configuration - do not use directly, use specific board environments
platform = espressif32
framework = arduino
lib_deps = 
    ${env.lib_deps}
    WiFi

[env:uno]
; Arduino Uno (ATmega328P)
platform = atmelavr
board = uno
lib_deps = 
    ${env.lib_deps}

[env:nano]
; Arduino Nano (ATmega328P)
platform = atmelavr
board = nanoatmega328
lib_deps = 
    ${env.lib_deps}

[env:mega]
; Arduino Mega 2560
platform = atmelavr
board = megaatmega2560
lib_deps = 
    ${env.lib_deps}

[env:nodemcuv2]
; NodeMCU v2 (ESP8266)
platform = espressif8266
board = nodemcuv2
lib_deps = 
    ${env.lib_deps}
    ESP8266WiFi

[env:d1_mini]
; Wemos D1 Mini (ESP8266)
platform = espressif8266
board = d1_mini
lib_deps = 
    ${env.lib_deps}
    ESP8266WiFi

[env:esp12e]
; ESP8266 ESP-12E
platform = espressif8266
board = esp12e
lib_deps = 
    ${env.lib_deps}
    ESP8266WiFi

[env:esp32dev]
; ESP32 Development Board
extends = env:esp32-base
board = esp32dev

[env:esp32-poe]
; ESP32-POE by Olimex
extends = env:esp32-base
board = esp32-poe

[env:esp32s2]
; ESP32-S2
extends = env:esp32-base
board = esp32-s2-saola-1

[env:esp32c3]
; ESP32-C3
extends = env:esp32-base
board = esp32-c3-devkitm-1

[env:homeassistant-esp32]
; Optimized for Home Assistant MQTT integration
extends = env:esp32-base
board = esp32dev
lib_deps = 
    ${env:esp32-base.lib_deps}
    ArduinoJson@^6.19.4
build_flags = 
    ${env.build_flags}
    -DHOME_ASSISTANT_INTEGRATION

[env:homeassistant-esp8266]
; Optimized for Home Assistant MQTT integration
platform = espressif8266
board = nodemcuv2
lib_deps = 
    ${env.lib_deps}
    ESP8266WiFi
    ArduinoJson@^6.19.4
build_flags = 
    ${env.build_flags}
    -DHOME_ASSISTANT_INTEGRATION